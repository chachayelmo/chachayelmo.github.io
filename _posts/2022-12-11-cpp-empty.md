---
published: true
title:  "[C++] Empty class"
excerpt: "C++ì— ëŒ€í•´ ì•Œì•„ë³´ê¸°, empty class"

categories:
  - Cpp
tags:
  - [C++, Cpp, Empty]

toc: true
toc_sticky: true
author: chachayelmo
sitemap:
  changefreq : daily
  priority : 1.0
comment: true
date: 2022-12-11
last_modified_at: 2022-12-11
---

## 1. empty class
- non static ë©¤ë²„ ë°ì´í„°ê°€ ì—†ëŠ” í´ë˜ìŠ¤

```cpp
#include <iostream> 
using namespace std; 
  
struct AAA 
{ 
}; 
int main() 
{ 
  AAA aaa; 
    
  cout << sizeof(AAA) << endl; // 1 Empty í´ë˜ìŠ¤ì˜ í¬ê¸°ëŠ” 1ë°”ì´íŠ¸
}
```

## 2. std::nothrow
- ë©”ëª¨ë¦¬ í• ë‹¹ ì‹¤íŒ¨ ì‹œ ì˜ˆì™¸(std::bad_alloc) ì „ë‹¬
- empty class typeìœ¼ë¡œ throwing ê³¼ non-throwing í• ë‹¹ í•¨ìˆ˜ì˜ overloadsë¥¼ ëª…í™•íˆ í•˜ëŠ” ë° ì‚¬ìš©

```cpp
#include <iostream> 

using namespace std; 
  
// new : ë©”ëª¨ë¦¬ í• ë‹¹ ì‹¤íŒ¨ ì‹œ ì˜ˆì™¸(std::bad_alloc) ì „ë‹¬ 
void* operator new(size_t sz) 
{ 
  void* p = malloc(sz); 
  if (p == nullptr) 
    throw std::bad_alloc(); 
  return p; 
} 
  
// ì˜¤ë²„ë¡œë”©ë§Œì„ ìœ„í•œ íƒ€ì…ì´ í•„ìš”í•  ë•Œ empty ë§ì´ ì‚¬ìš©
struct xnothrow_t {}; 
xnothrow_t xnothrow; 
  
//ì‹¤íŒ¨ ì‹œ 0ì„ ë°˜í™˜í•˜ëŠ” ë²„ì „ 
void* operator new(size_t sz, xnothrow_t) 
{ 
  void* p = malloc(sz); 
  return p; 
} 
  
int main() 
{ 
  int* p1 = new(xnothrow) int; // ì‹¤íŒ¨ì‹œ 0 ë°˜í™˜ 

  if (p1 == nullptr) {}
  else 
    delete p1; 
}
```

```cpp
#include <iostream>
#include <new>
 
int main()
{
  try {
    while (true) {
      new int[100000000ul];   // throwing overload
    }
  } catch (const std::bad_alloc& e) {
    std::cout << e.what() << '\n';
  }

  while (true) {
    int* p = new(std::nothrow) int[100000000ul]; // non-throwing overload
    if (p == nullptr) {
      std::cout << "Allocation returned nullptr\n";
      break;
    }
  }
}
```

## ì°¸ê³ 
codenuri ê°•ì„ë¯¼ ê°•ì‚¬ ê°•ì˜ ë‚´ìš©ê¸°ë°˜ìœ¼ë¡œ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.  
[ì½”ë“œëˆ„ë¦¬](https://github.com/codenuri)  
[cppreference](https://en.cppreference.com/w/cpp/memory/new/nothrow)

<br>

    This is personal diary for study documents.
    Please comment if I'm wrong or missing something else ğŸ˜„. 

[Top](#){: .btn .btn--primary }{: .align-right}